# Linux Basic Day 1

2020.07.21.

* 환경설정

  - virtualbox windows version 설치
  - 준비된 ova 파일 가져오기 (CentOS)
  - 파일>환경설정>입력 >가상머신> 호스트키 조합 확인 및 변경

* 총론

  + 컴퓨터의 구성 요소 4가지 - I/O, CPU, RAM, SSD(보조기억장치)

  + Linux의 구성요소 3가지 - Kernel, Shell, 파일 시스템

    + shell 명령어 해석기

    + Bash Shell - 자동완성 기능, Linux 표준 웹

      \#슈퍼유저 $ 일반유저

      tab 2번 : 자동완성 후보 나옴. tab 1번: 후보가 하나일 때 자동완성

      `history` 입력했던 명령어들 확인 가능

    * 파일시스템 - 주요 디렉토리 목록

      `/` 루트 디렉토리

      cf. `root` : 루트 사용자의 홈 디렉토리

      `bin` 명령어 관련 파일

      `home/사용자 이름` 사용자가 파일을 저장할 수 있는 공간 

      `run` 메모리 역할

      `sbin` 시스템 관리 명령어

      `usr` 소프트웨어, 라이브러리

      `var` DB 등 가변데이터

      `dev` 입출력 장치 등 디바이스 관련 파일

* 리눅스 명령어의 구성

  * command [option] [argument]

    []는 선택이라는 의미, command 만으로 명령어 입력 가능.

    `w` 접속 정보 확인

    `man [option] command` command 명령어의 매뉴얼 확인

    `man cd` 로도 조회 가능. 

    `man -f  명령어` 섹션 확인 가능

    `mandb` 초기 디비 구축

    `man [섹션 넘버] 명령어` 매뉴얼의 섹션으로 접속 가능

* 파일 시스템 계층 구조

  * 경로 *절대 경로와 상대 경로를 구분하지 않으면 오류 발생*

    * 절대 경로 (/)부터 시작 특히 파일을 만들 때 생략하지 않도록 유의해야함. 

    * 상대 경로 (./ : 현재 위치, 생략 가능 ) (../ 상위 디렉토리)

      `pwd` 현재 위치를 절대 경로로 알려줌

      `cd ~` 틸드, 자신의 홈 디렉토리를 의미. `cd`만 쳐도 홈으로 이동

      `cd -` 이전 디렉토리

​	

* 파일의 요소 : 파일 이름, i node , 데이터 블록

* `ls` 의 옵션들

  `-l` 파일 종류, 권한, 하드링크 개수, 소유자, 소유 그룹, 크기, 마지막 수정 시간, 파일 이름

  `-i` 아이노드 값 조회

  `-ld`디렉토리 자체의 정보를 조회

* 파일과 관련된 명령어

  * `file` 명령어 : 파일 정보 조회 가능 cf. `wc` 라인수, 단어수, 파일 크기, 경로

  * `cat` 파일 내용을 한꺼번에 보여줌 

    cf. `more`, `less` : 현재 화면에 맞춰서 보여줌

    `	space` 다음 페이지, `b` 전페이지

  * `head`, `tail`

    `head -n 2 파일명`

* 파일 생성

  * `touch` 접근 분기점으로 많이 사용함. 빈파일 생성 or 마지막 수정 시간 갱신

    디렉토리의 시간도 현재 시간으로 갱신 가능

  * `mkdir -p 경로/생성 폴더` 있으면 폴더를 추가로 넣고, 폴더가 없으면 새로 만듦.

* 파일 이동, 복사, 삭제

  * `cp`, `mv`, `rm `공통 옵션

    `-i` 대화 형식으로 오버라이드와 삭제에 대해서 물어봄. (root 사용자에게는 디폴트 값)

    `-f` 대화형을 진행하지 않음. 

  * 다중 복사일 때에는 원본 명 그대로 복사됨. 

  * 마지막 아규먼트는 디렉토리를 지칭

  * `cp -r` 디렉토리 자체를 복사

  * `cp` 파일 복사 -> 원본 파일 존재

    cf. `mv` 파일 이동 -> 원본 파일이 이동 : inode 로 확인 가능

  * 덮어쓰기 관련해서 공부 필요

  * 특히 `-r`을 쓰는지, 오버라이트 관련해서도 정리 필요. + 능숙해질 것. 

  * 파일 경로가 꼬이면 오류가 날 가능성 많음. 

  * `esc` +` .`마지막 절을 통째로 불러옴

  * 바꾸지 않고 넣기 위해 1번 문제 풀이 필요 pwd로 확인 후 풀기

* 파일 이동, 복사, 삭제 자습

  `cp option source target`  `source`에 해당하는 '파일'을 `target`이라는 이름의 '파일'로 복사함.

  `cp option sources target ` 이때 `target`은 반드시 디렉토리가 되어야 함. 

  -> 이 경우 `-i`옵션을 사용하여 덮어쓰기를 예방해야 함. 

  `mv option source target` `source`에 해당하는 '파일' 또는 '폴더'를 `target`이라는 이름의 '폴더' 내부로 이동함.

  `mkdir 폴더A/폴더B`  `폴더A`가 존재하지 않는다면 에러가 발생. -> 현재 디렉토리를 `폴더A/폴더B`의 경로로 복사한다는 의미임.

  `mkdir -p 폴더A/폴더B` `-p`옵션을 사용하여 `폴더A`를 만들고 하위에 `폴더B`도 생성. (계층적으로 폴더 생성)

  `mv old_filename new_filename`  `mv old_dirname new_dirname` **같은 경로 내에** 다른 파일/폴더 명으로 이름 변경

  `rmdir directory(s)` **비어있는** 디렉토리 삭제

  `rm -r directory(s) `**내용이 있는** 디렉토리를 **하위 내용까지** 삭제 -> 위험하기 때문에 반드시 `-i` 옵션을 사용해야 함. 

  

---



* 링크 

  * 심볼링크 `ln -s`

     동일한 경로에 대한 링크를 만든다. (?)

     다른 테이블을 통한 간접적 접근, 새로운 파일 - 간접적 접근

    절대경로와 상대경로로 지정하느냐에 따라 차이가 있음. 

    같은 이름의 파일이지만 경로가 다를 경우, 

    -> 절대경로 - /로 시작, 상대경로 - ./이 생략되었을 경우 해당 위치의 파일을 참조 유의

    경로 삽입 시 앞에 절대경로인지 상대경로인지 유의해서 확인해야함. 

  * 하드링크 `ln`

    동일한 아이노드와 데이터 블록, 이름만 다름

    원본 제거시 본인이 원본이 됨

    

* 기본 권한 설정

  * 권한 : 읽고 쓰고 실행, 

    * 파일과 디렉토리에 미치는 영향이 다름. 파일 / 폴더

      `r` cat 등 명령어 사용 가능 / `ls`, `find`

      `w` vim 등 편집 툴 사용 가능 / `mkdir`

      `x` 명령어로 접근이 가능 / `cd `: 통로 역할을 하고 있다. 

      ​	폴더 명을 알고 있다면, x  일때 내부 폴더 접근 가능. 

      ​	마찬가지로 이름을 알고있다면, 폴더에 권한이 없어도 파일 변경은 가능. 

    * 실행 권한이 있다는 가정 하에 읽기, 쓰기 권한이 가능

  * 소유 : 소유자 입니까, 이 파일의 소유 그룹에 속합니까. 나머지는 기타 사용자.  *UGO*

  * 형식, 권한(소유자), 권한 (소유그룹), 권한(기타사용자)

  * 기본 권한 파일 666 , 777이 아니라, 644,755인 이유

    ​	`umask` 해당 권한을 제한하고, 파일과 폴더를 만들겠다. 

    ​		 영구 설정을 위해서는 /etc/bashrc파일 변경 후 재부팅

  * 변경

    * chmod  심볼릭 모드/ 8진수 모드

      who `u` `g` `o` `a` what + - =(셋팅 다시) which

      하위에 디렉토리 내 모두 적용 `-R` : 반복해서 권한을 바꿈. 

      rwX -> 파일에는 실행권한을 주지 않고 디렉토리에 실행권한을 줌. 

      `chmod -R a=rX`의 의미 알기 심볼릭 모드와 관련. 

      `chmod u= 파일명` 유저에게 아무 권한을 주지 않음.

    * 짝수인 경우 실행권한이 없음. 홀수면 실행권한이 있음..! 대박

    * 755 초기셋팅

    * -444 = a-r

  * 소유권 변경

  * 소유주(소유주), 소유그룹(:소유그룹), 소유주 소유그룹(사용자:소유그룹)

    `chown adm:nfsnobody /경로`



---

* grep [option] pattern 파일명

  해당 패턴이 포함된라인 단위로 출력

  * 옵션

    `-i` 대소문자 구분 않음. 

    `-w` 해당 단어만 검색

    linux 특수문자, 일반문자, 띄어쓰기로 구분자를 만듦. 

    `-v` 해당 패턴을 빼고 나머지를 출력

    `-r` 폴더 내에 있는 파일을 다 뒤져서 출력, `grep -r pattern 폴더`

    ​	다른 옵션에서는 폴더가 들어올 경우 에러가 남. 

  * 정규표현식

    `.` 와일드카드 띄어쓰기를 포함, 하나의 문자를 대체

    `*`앞의 문자를 0번 이상 반복하라. 

    `.*` 모든 문자를 0번 이상 반복하라. `c.*t` c로 시작해 t로 끝나는 모든 패턴. 띄어쓰기, 중간의 t,c갯수 관련 없음.

    `[]` 대괄호 내 패턴을 한 글자씩 대체 `c[ab]t` 

    ​	cf. <-> `[^pattern]`pattern 제외 나머지, 대괄호는 무조건 한글자! , 오름차순만 가능 

    `[^]` 정규 표현식이대괄호에 들어가도 일반 문자로 인식함.  

    추가 옵션.

    `-A` `-B` `-C` 뒤, 앞, 아래위 줄을 함께 출력.

    * -e grep 방식 옵션처럼 -e 붙임
    * egrep '(^root|^centos)' 경로` 로도 표현 가능
    * fgrep 정규표현식을 문자로 인식 cf. `\`이스케이프 문자 사용 = 패턴도 찾을 수 있음.



---

* `find`

  * `find path [option] [argument] activate`

    `-ecxe`, `-ok` 차이

    `-arp` 보충 필요.

    `

